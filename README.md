# Foo

**Foo** 是一个简单的解释器，用于执行 `Foo` 脚本语言。

`Foo` 脚本语言受到 `Forth` 语言的启发而诞生，是面向堆栈的语言，采用后缀表达式（逆波兰表达式）的方式书写。

目前解释器支持基本算数运算、比较运算、简单条件语句、简单循环语句、堆栈操作、变量操作、函数操作以及注释，条件语句和循环语句均支持嵌套。

同时，Foo 解释器中实现了虚拟机的封装，任何人都可以在 C 语言程序中自由创建和使用 Foo 虚拟机，同时也可以使用 C 语言定义函数供 Foo 使用。

目前解释器的功能比较简陋，但是由于继承了 `Forth` 语言的高拓展性，可以利用 Foo C API 增加更多的功能。

## 安装

### 克隆仓库

```bash
git clone https://github.com/CoccusQ/foo.git
cd foo
```

### 编译

需要安装 C 编译器（如 GCC）来编译项目。

```bash
gcc -o foo main.c
```

### 运行

运行编译后的可执行文件：

```bash
./foo
```

你也可以直接运行特定脚本文件：

```bash
./foo example.foo
```

## 使用方法

### 交互模式

进入交互模式后，你可以直接输入命令来执行。

```bash
./foo
```

示例：

```
1 2 + 3 * .
```

输出：

```
9
```

### 脚本模式

你可以将命令保存到一个文件中，然后运行该文件。

```bash
./foo example.foo
```

示例脚本文件内容：

```
// fib.foo
var a
var b
var n
: fib n ! 0 a ! 1 b ! begin a @ b @ + dup . b @ a ! dup b ! n @ > until ;
100 fib
bye
```

## 基本语法和功能

### 基本算数运算

支持基本算数运算，如加法、减法、乘法、除法等。

```
1 2 + . 3
3 2 - . 1
3 4 * . 12
12 3 / . 4
```

### 堆栈操作

支持堆栈操作，如 `dup`（复制栈顶元素）、`.s`（打印堆栈内容）等。

```
1 2 dup + 
.s 
<3> 1 2 2
```

### 变量操作

支持变量定义和操作，如 `var`（定义变量）、`@`（获取变量值）、`!`（设置变量值）、`?`（查询变量值）等。

```
var myVar
1 myVar !
myVar @ .
```

### 函数操作

支持函数定义和操作，如 `: ;`（定义函数）、调用函数。注意，定义函数需要单独的一行。

```
: square dup * ;
5 square
```

### 条件语句

支持条件语句，如 `if`、`else`、`then`。

```
1 2 > if 1 . else 2 . then
```

### 循环语句

支持循环语句，如 `begin`、`until`。

```
var i
begin i @ 2 % 0 == if i ? then i ++ i @ 20 >= until
```

## 项目结构

```
foo/
├── README.md               # 项目说明文档
├── LICENSE                 # 许可证文件
├── src/                    # 源代码目录
│   ├── main.c              # 主程序文件
│   └── foo.h               # 虚拟机头文件
├── examples/               # 示例代码目录
│   └── example.foo         # 示例脚本文件
└── docs/                   # 文档目录（可选）
    ├── architecture.md     # 架构设计文档
    ├── api.md              # API 文档
    └── usage.md            # 使用说明
```

## 贡献

欢迎贡献！如果你发现错误或者想要改进项目，请提交问题或发送合并请求。

## 许可

本项目采用 [MIT License](LICENSE) 开源。
```